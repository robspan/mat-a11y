<!-- @a11y-pass -->
<!-- Input with matDatepicker inside mat-form-field with mat-label -->
<mat-form-field>
  <mat-label>Choose a date</mat-label>
  <input matInput [matDatepicker]="picker1">
  <mat-datepicker-toggle matSuffix [for]="picker1" aria-label="Open calendar"></mat-datepicker-toggle>
  <mat-datepicker #picker1></mat-datepicker>
</mat-form-field>

<!-- Input with matDatepicker and direct aria-label -->
<input matInput [matDatepicker]="picker2" aria-label="Select birth date">
<mat-datepicker-toggle [for]="picker2" aria-label="Open birth date calendar"></mat-datepicker-toggle>
<mat-datepicker #picker2></mat-datepicker>

<!-- Input with matDatepicker and aria-labelledby -->
<span id="event-date-label" class="visually-hidden">Event date</span>
<input matInput [matDatepicker]="picker3" aria-labelledby="event-date-label">
<mat-datepicker-toggle [for]="picker3" aria-labelledby="toggle-label"></mat-datepicker-toggle>
<mat-datepicker #picker3></mat-datepicker>

<!-- Input with Angular binding for aria-label -->
<mat-form-field appearance="outline">
  <mat-label>Appointment Date</mat-label>
  <input matInput [matDatepicker]="picker4" [aria-label]="dateLabel">
  <mat-datepicker-toggle matSuffix [for]="picker4" [aria-label]="toggleLabel"></mat-datepicker-toggle>
  <mat-datepicker #picker4></mat-datepicker>
</mat-form-field>

<!-- mat-datepicker-toggle with aria-label -->
<mat-datepicker-toggle [for]="picker5" aria-label="Toggle calendar"></mat-datepicker-toggle>

<!-- @a11y-pass -->
<!-- Datepicker with dark mode theming -->
<mat-form-field class="dark-theme-datepicker" appearance="fill">
  <mat-label>Select date</mat-label>
  <input matInput [matDatepicker]="darkPicker">
  <mat-datepicker-toggle matSuffix [for]="darkPicker" aria-label="Open dark mode calendar"></mat-datepicker-toggle>
  <mat-datepicker #darkPicker panelClass="dark-calendar-panel"></mat-datepicker>
</mat-form-field>

<!-- @a11y-pass -->
<!-- Date range picker with proper labels -->
<mat-form-field appearance="outline">
  <mat-label>Trip dates</mat-label>
  <mat-date-range-input [rangePicker]="rangePicker">
    <input matStartDate placeholder="Start date" aria-label="Trip start date">
    <input matEndDate placeholder="End date" aria-label="Trip end date">
  </mat-date-range-input>
  <mat-date-range-picker #rangePicker></mat-date-range-picker>
  <mat-datepicker-toggle matSuffix [for]="rangePicker" aria-label="Open date range calendar"></mat-datepicker-toggle>
</mat-form-field>

<!-- @a11y-pass -->
<!-- Disabled datepicker with accessible label -->
<mat-form-field>
  <mat-label>Locked date</mat-label>
  <input matInput [matDatepicker]="disabledPicker" disabled aria-label="Date selection disabled">
  <mat-datepicker-toggle matSuffix [for]="disabledPicker" disabled aria-label="Calendar unavailable"></mat-datepicker-toggle>
  <mat-datepicker #disabledPicker></mat-datepicker>
</mat-form-field>

<!-- @a11y-pass -->
<!-- Datepicker with validation and error state -->
<mat-form-field>
  <mat-label>Appointment date</mat-label>
  <input matInput [matDatepicker]="validationPicker" [min]="minDate" [max]="maxDate" required>
  <mat-datepicker-toggle matSuffix [for]="validationPicker" aria-label="Open appointment calendar"></mat-datepicker-toggle>
  <mat-datepicker #validationPicker></mat-datepicker>
  <mat-error *ngIf="dateControl.hasError('required')">Date is required</mat-error>
  <mat-error *ngIf="dateControl.hasError('matDatepickerMin')">Date is too early</mat-error>
</mat-form-field>

<!-- @a11y-pass -->
<!-- Touch UI datepicker for mobile -->
<mat-form-field>
  <mat-label>Mobile-friendly date</mat-label>
  <input matInput [matDatepicker]="touchPicker">
  <mat-datepicker-toggle matSuffix [for]="touchPicker" aria-label="Open touch calendar"></mat-datepicker-toggle>
  <mat-datepicker #touchPicker touchUi></mat-datepicker>
</mat-form-field>

<!-- @a11y-fail -->
<!-- Input with matDatepicker but NO label (not in mat-form-field, no aria-label) -->
<input matInput [matDatepicker]="pickerFail1">
<mat-datepicker #pickerFail1></mat-datepicker>

<!-- Input inside mat-form-field but WITHOUT mat-label -->
<mat-form-field>
  <input matInput [matDatepicker]="pickerFail2" placeholder="Select date">
  <mat-datepicker #pickerFail2></mat-datepicker>
</mat-form-field>

<!-- mat-datepicker-toggle without aria-label -->
<mat-datepicker-toggle matSuffix [for]="pickerFail3"></mat-datepicker-toggle>
<mat-datepicker #pickerFail3></mat-datepicker>

<!-- Another toggle without accessible name -->
<mat-form-field>
  <mat-label>Start Date</mat-label>
  <input matInput [matDatepicker]="pickerFail4">
  <mat-datepicker-toggle matSuffix [for]="pickerFail4"></mat-datepicker-toggle>
  <mat-datepicker #pickerFail4></mat-datepicker>
</mat-form-field>

<!-- Date range input without labels -->
<mat-form-field>
  <mat-date-range-input [rangePicker]="unlabeledRange">
    <input matStartDate placeholder="From">
    <input matEndDate placeholder="To">
  </mat-date-range-input>
  <mat-date-range-picker #unlabeledRange></mat-date-range-picker>
</mat-form-field>

<!-- Datepicker in ngFor without dynamic labels -->
<div *ngFor="let field of dateFields">
  <input matInput [matDatepicker]="loopPicker">
  <mat-datepicker-toggle [for]="loopPicker"></mat-datepicker-toggle>
  <mat-datepicker #loopPicker></mat-datepicker>
</div>

<!-- Inline datepicker without associated label -->
<mat-datepicker-toggle [for]="inlinePicker"></mat-datepicker-toggle>
<mat-datepicker #inlinePicker [opened]="true"></mat-datepicker>

<!-- Responsive datepicker that hides label on mobile -->
<mat-form-field class="responsive-date">
  <mat-label class="hide-on-mobile">Desktop Label</mat-label>
  <input matInput [matDatepicker]="responsivePicker">
  <mat-datepicker #responsivePicker></mat-datepicker>
</mat-form-field>

<!-- @a11y-false-positive -->
<!-- Datepicker input with wrapping label element -->
<label>
  Departure date
  <input matInput [matDatepicker]="wrappedPicker">
</label>
<mat-datepicker-toggle [for]="wrappedPicker" aria-label="Open departure date calendar"></mat-datepicker-toggle>
<mat-datepicker #wrappedPicker></mat-datepicker>

<!-- Datepicker input with title attribute as fallback -->
<input matInput [matDatepicker]="titlePicker" title="Select reservation date">
<mat-datepicker-toggle [for]="titlePicker" title="Open calendar"></mat-datepicker-toggle>
<mat-datepicker #titlePicker></mat-datepicker>

<!-- Datepicker input with explicit for/id label association -->
<label for="explicit-date-input">Return date</label>
<input id="explicit-date-input" matInput [matDatepicker]="explicitPicker">
<mat-datepicker-toggle [for]="explicitPicker" aria-label="Open return date calendar"></mat-datepicker-toggle>
<mat-datepicker #explicitPicker></mat-datepicker>

<!-- mat-datepicker-toggle with text content providing accessible name -->
<mat-datepicker-toggle [for]="textTogglePicker">Open Calendar</mat-datepicker-toggle>
<mat-datepicker #textTogglePicker></mat-datepicker>

<!-- Datepicker with fieldset/legend context -->
<fieldset>
  <legend>Event scheduling</legend>
  <input matInput [matDatepicker]="fieldsetPicker">
  <mat-datepicker-toggle [for]="fieldsetPicker"></mat-datepicker-toggle>
  <mat-datepicker #fieldsetPicker></mat-datepicker>
</fieldset>

<!-- Datepicker with aria-describedby providing context -->
<input matInput [matDatepicker]="describedPicker" aria-describedby="date-help">
<span id="date-help">Select a date within the next 30 days</span>
<mat-datepicker-toggle [for]="describedPicker" aria-describedby="toggle-help"></mat-datepicker-toggle>
<mat-datepicker #describedPicker></mat-datepicker>

<!-- Datepicker toggle with custom icon having aria-label -->
<mat-datepicker-toggle [for]="customIconPicker">
  <mat-icon matDatepickerToggleIcon aria-label="Open calendar">calendar_today</mat-icon>
</mat-datepicker-toggle>
<mat-datepicker #customIconPicker></mat-datepicker>

<!-- Datepicker in Angular component with label via ng-content -->
<app-date-field>
  <input matInput [matDatepicker]="ngContentPicker">
  <mat-datepicker #ngContentPicker></mat-datepicker>
</app-date-field>

<!-- @a11y-false-negative -->
<!-- Datepicker input with empty aria-label -->
<input matInput [matDatepicker]="emptyLabelPicker" aria-label="">
<mat-datepicker #emptyLabelPicker></mat-datepicker>

<!-- Datepicker input with aria-labelledby pointing to non-existent element -->
<input matInput [matDatepicker]="missingRefPicker" aria-labelledby="non-existent-date-label">
<mat-datepicker #missingRefPicker></mat-datepicker>

<!-- mat-form-field with mat-label containing only whitespace -->
<mat-form-field>
  <mat-label>   </mat-label>
  <input matInput [matDatepicker]="whitespacePicker">
  <mat-datepicker #whitespacePicker></mat-datepicker>
</mat-form-field>

<!-- mat-datepicker-toggle with empty aria-label -->
<mat-form-field>
  <mat-label>End Date</mat-label>
  <input matInput [matDatepicker]="emptyTogglePicker">
  <mat-datepicker-toggle matSuffix [for]="emptyTogglePicker" aria-label=""></mat-datepicker-toggle>
  <mat-datepicker #emptyTogglePicker></mat-datepicker>
</mat-form-field>

<!-- Date range inputs with only one input labeled -->
<mat-form-field>
  <mat-label>Start date only</mat-label>
  <mat-date-range-input [rangePicker]="partialLabelRange">
    <input matStartDate aria-label="Start">
    <input matEndDate>
  </mat-date-range-input>
  <mat-date-range-picker #partialLabelRange></mat-date-range-picker>
</mat-form-field>

<!-- Datepicker with dynamic label that resolves to null -->
<mat-form-field>
  <mat-label>{{ nullLabel }}</mat-label>
  <input matInput [matDatepicker]="nullLabelPicker">
  <mat-datepicker #nullLabelPicker></mat-datepicker>
</mat-form-field>

<!-- Datepicker with label hidden from assistive tech -->
<mat-form-field>
  <mat-label aria-hidden="true">Hidden from AT</mat-label>
  <input matInput [matDatepicker]="hiddenATLabelPicker">
  <mat-datepicker #hiddenATLabelPicker></mat-datepicker>
</mat-form-field>

<!-- Datepicker toggle with disabled state but no aria-disabled -->
<mat-datepicker-toggle [for]="disabledToggle" [disabled]="true"></mat-datepicker-toggle>
<mat-datepicker #disabledToggle></mat-datepicker>

<!-- Calendar panel without clear labeling for current selection -->
<mat-form-field>
  <mat-label>Ambiguous date</mat-label>
  <input matInput [matDatepicker]="ambiguousPicker" [value]="presetDate">
  <mat-datepicker-toggle matSuffix [for]="ambiguousPicker" aria-label="   "></mat-datepicker-toggle>
  <mat-datepicker #ambiguousPicker></mat-datepicker>
</mat-form-field>

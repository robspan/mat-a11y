<!-- @a11y-pass -->
<!-- Bottom sheet template with proper heading -->
<ng-template #bottomSheetTemplate>
  <h2>Select an option</h2>
  <ul>
    <li>Option 1</li>
    <li>Option 2</li>
  </ul>
</ng-template>

<!-- Bottom sheet with heading and close button with aria-label -->
<ng-template #shareBottomSheet>
  <h3>Share this item</h3>
  <p>Choose how to share:</p>
  <button aria-label="Close" mat-icon-button>
    <mat-icon>close</mat-icon>
  </button>
  <button>Email</button>
  <button>Copy Link</button>
</ng-template>

<!-- Bottom sheet with mat-dialog-close and aria-label -->
<ng-template matBottomSheet>
  <h2>Confirm action</h2>
  <p>Are you sure you want to proceed?</p>
  <button [mat-dialog-close]="true" aria-label="Close dialog">
    <mat-icon>close</mat-icon>
  </button>
  <button mat-button>Cancel</button>
  <button mat-raised-button color="primary">Confirm</button>
</ng-template>

<!-- mat-bottom-sheet-container with heading -->
<mat-bottom-sheet-container>
  <h2>Settings</h2>
  <mat-list>
    <mat-list-item>Theme</mat-list-item>
    <mat-list-item>Notifications</mat-list-item>
  </mat-list>
</mat-bottom-sheet-container>

<!-- Bottom sheet with role="heading" instead of h1-h6 -->
<ng-template #accessibleBottomSheet>
  <div role="heading" aria-level="2">Filter Options</div>
  <mat-selection-list>
    <mat-list-option>Filter A</mat-list-option>
    <mat-list-option>Filter B</mat-list-option>
  </mat-selection-list>
</ng-template>

<!-- Bottom sheet with close button that has text content -->
<ng-template #textCloseBottomSheet>
  <h2>Actions</h2>
  <button mat-button>Close</button>
</ng-template>

<!-- Bottom sheet with dark mode theme toggle -->
<ng-template #darkModeBottomSheet>
  <h2>Theme Settings</h2>
  <mat-slide-toggle [checked]="isDarkMode" (change)="toggleTheme()">
    Dark Mode
  </mat-slide-toggle>
  <button mat-button aria-label="Close theme settings">Done</button>
</ng-template>

<!-- Bottom sheet with SVG icon close button with aria-label -->
<ng-template #svgCloseBottomSheet>
  <h3>Options</h3>
  <button mat-icon-button aria-label="Close options">
    <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59..."/></svg>
  </button>
  <mat-list>
    <mat-list-item>Option 1</mat-list-item>
  </mat-list>
</ng-template>

<!-- Lazy-loaded bottom sheet content with heading -->
<ng-template #lazyBottomSheet>
  <ng-container *ngIf="contentLoaded$ | async">
    <h2>{{ dynamicTitle }}</h2>
    <div *ngFor="let item of items">{{ item }}</div>
  </ng-container>
</ng-template>

<!-- Bottom sheet in responsive layout with proper heading -->
<ng-template #responsiveBottomSheet>
  <div class="bottom-sheet-content" [class.mobile]="isMobile">
    <h2>Select Action</h2>
    <mat-action-list>
      <button mat-list-item (click)="action1()">Action 1</button>
      <button mat-list-item (click)="action2()">Action 2</button>
    </mat-action-list>
  </div>
</ng-template>

<!-- Bottom sheet with mat-icon close and aria-label on container -->
<ng-template #iconCloseSheet>
  <div role="dialog" aria-labelledby="sheet-heading-1">
    <h2 id="sheet-heading-1">Share Content</h2>
    <button mat-icon-button aria-label="Dismiss share panel">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</ng-template>

<!-- @a11y-fail -->
<!-- Bottom sheet without any heading -->
<ng-template #noHeadingBottomSheet>
  <p>Select an option to continue:</p>
  <ul>
    <li>Option A</li>
    <li>Option B</li>
  </ul>
</ng-template>

<!-- mat-bottom-sheet-container without heading -->
<mat-bottom-sheet-container>
  <mat-list>
    <mat-list-item>Item 1</mat-list-item>
    <mat-list-item>Item 2</mat-list-item>
  </mat-list>
</mat-bottom-sheet-container>

<!-- Bottom sheet with close button missing aria-label (icon only) -->
<ng-template #noAriaLabelBottomSheet>
  <h2>Share</h2>
  <button mat-icon-button class="close-button">
    <mat-icon>close</mat-icon>
  </button>
  <p>Share content here</p>
</ng-template>

<!-- Bottom sheet with mat-dialog-close but no aria-label on icon button -->
<ng-template matBottomSheet>
  <h3>Quick Actions</h3>
  <button [mat-dialog-close]="false">
    <mat-icon>cancel</mat-icon>
  </button>
  <button mat-button>Action 1</button>
</ng-template>

<!-- Another bottom sheet missing both heading and close button aria-label -->
<ng-template #problematicBottomSheet>
  <div class="sheet-content">
    <button class="dismiss">
      <mat-icon>clear</mat-icon>
    </button>
    <span>No heading here</span>
  </div>
</ng-template>

<!-- Dark mode bottom sheet missing heading -->
<ng-template #darkModeNoHeading>
  <div [class.dark-theme]="isDarkMode">
    <mat-slide-toggle>Enable dark mode</mat-slide-toggle>
    <button mat-icon-button>
      <mat-icon>close</mat-icon>
    </button>
  </div>
</ng-template>

<!-- Bottom sheet with SVG close icon missing aria-label -->
<ng-template #svgNoLabelSheet>
  <h2>Settings</h2>
  <button mat-icon-button>
    <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5..."/></svg>
  </button>
</ng-template>

<!-- Lazy-loaded bottom sheet missing heading -->
<ng-template #lazyNoHeadingSheet>
  <ng-container *ngIf="ready$ | async">
    <mat-list>
      <mat-list-item *ngFor="let opt of options">{{ opt }}</mat-list-item>
    </mat-list>
  </ng-container>
</ng-template>

<!-- Bottom sheet with icon-only FAB close without label -->
<ng-template #fabCloseSheet>
  <h2>Quick Actions</h2>
  <button mat-mini-fab color="warn">
    <mat-icon>close</mat-icon>
  </button>
</ng-template>

<!-- Responsive bottom sheet with conditional content but no heading -->
<ng-template #responsiveNoHeadingSheet>
  <div class="sheet" [class.compact]="isCompact">
    <button mat-icon-button class="close-btn">
      <mat-icon>cancel</mat-icon>
    </button>
    <mat-divider></mat-divider>
    <p>Content without heading</p>
  </div>
</ng-template>

<!-- @a11y-false-positive -->
<!-- Bottom sheet with heading injected via structural directive -->
<ng-template #dynamicHeadingSheet>
  <ng-container *ngIf="showHeading">
    <h2>{{ sheetTitle }}</h2>
  </ng-container>
  <p>Content here</p>
</ng-template>

<!-- Bottom sheet with aria-labelledby pointing to title element -->
<ng-template #ariaLabelledBySheet>
  <div role="dialog" aria-labelledby="sheet-title">
    <span id="sheet-title">Sheet Options</span>
    <button mat-button>Option 1</button>
  </div>
</ng-template>

<!-- Bottom sheet with visually hidden heading for screen readers -->
<ng-template #srOnlyHeadingSheet>
  <h2 class="sr-only visually-hidden">Settings Menu</h2>
  <mat-nav-list>
    <a mat-list-item>Setting 1</a>
    <a mat-list-item>Setting 2</a>
  </mat-nav-list>
</ng-template>

<!-- Close button with aria-label via binding -->
<ng-template #boundAriaLabelSheet>
  <h3>Actions</h3>
  <button mat-icon-button [attr.aria-label]="closeButtonLabel">
    <mat-icon>close</mat-icon>
  </button>
</ng-template>

<!-- Bottom sheet with heading provided by custom component -->
<ng-template #customHeadingSheet>
  <app-sheet-header title="Custom Heading"></app-sheet-header>
  <mat-list>
    <mat-list-item>Item</mat-list-item>
  </mat-list>
</ng-template>

<!-- Bottom sheet with translated heading and close label -->
<ng-template #i18nSheet>
  <h2>{{ 'SHEET_TITLE' | translate }}</h2>
  <button mat-icon-button [attr.aria-label]="'CLOSE' | translate">
    <mat-icon>close</mat-icon>
  </button>
</ng-template>

<!-- Bottom sheet with ngSwitch containing headings -->
<ng-template #switchHeadingSheet>
  <ng-container [ngSwitch]="sheetType">
    <h2 *ngSwitchCase="'share'">Share Options</h2>
    <h2 *ngSwitchCase="'settings'">Settings</h2>
    <h2 *ngSwitchDefault>Options</h2>
  </ng-container>
  <button mat-button>Done</button>
</ng-template>

<!-- Bottom sheet with CDK focus trap and proper structure -->
<ng-template #focusTrapSheet>
  <div cdkTrapFocus cdkTrapFocusAutoCapture role="dialog" aria-labelledby="trap-heading">
    <h2 id="trap-heading">Modal Actions</h2>
    <button mat-button cdkFocusInitial>Primary Action</button>
    <button mat-button aria-label="Close modal">Cancel</button>
  </div>
</ng-template>

<!-- Dark mode themed bottom sheet with proper accessibility -->
<ng-template #accessibleDarkSheet>
  <div [class.dark-theme]="isDarkMode" role="dialog" aria-labelledby="dark-sheet-title">
    <h2 id="dark-sheet-title">Appearance Settings</h2>
    <mat-slide-toggle>Dark Mode</mat-slide-toggle>
    <button mat-icon-button aria-label="Close appearance settings">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</ng-template>

<!-- @a11y-false-negative -->
<!-- Bottom sheet with empty heading -->
<ng-template #emptyHeadingSheet>
  <h2></h2>
  <p>Content without meaningful heading</p>
</ng-template>

<!-- Bottom sheet with heading containing only whitespace -->
<ng-template #whitespaceHeadingSheet>
  <h2>   </h2>
  <mat-list>
    <mat-list-item>Item</mat-list-item>
  </mat-list>
</ng-template>

<!-- Close button with empty aria-label -->
<ng-template #emptyAriaLabelCloseSheet>
  <h2>Share</h2>
  <button mat-icon-button aria-label="">
    <mat-icon>close</mat-icon>
  </button>
</ng-template>

<!-- Heading hidden with display:none or aria-hidden -->
<ng-template #hiddenHeadingSheet>
  <h2 aria-hidden="true" style="display:none">Hidden Title</h2>
  <p>Visible content but heading is hidden from AT</p>
</ng-template>

<!-- Bottom sheet with heading that contains only icon -->
<ng-template #iconOnlyHeadingSheet>
  <h2><mat-icon>settings</mat-icon></h2>
  <mat-list>
    <mat-list-item>Setting 1</mat-list-item>
  </mat-list>
</ng-template>

<!-- Bottom sheet with close button aria-label that says only "button" -->
<ng-template #unhelpfulCloseSheet>
  <h2>Actions</h2>
  <button mat-icon-button aria-label="button">
    <mat-icon>close</mat-icon>
  </button>
</ng-template>

<!-- Bottom sheet with heading from binding that may be empty -->
<ng-template #dynamicEmptyHeadingSheet>
  <h2>{{ possiblyEmptyTitle }}</h2>
  <button mat-button aria-label="Close">Done</button>
</ng-template>

<!-- Bottom sheet with duplicate heading IDs -->
<ng-template #duplicateIdSheet>
  <h2 id="sheet-title">First Title</h2>
  <div id="sheet-title">Duplicate ID element</div>
  <button mat-button>Close</button>
</ng-template>

<!-- Bottom sheet with aria-labelledby pointing to hidden element -->
<ng-template #hiddenLabelRefSheet>
  <span id="hidden-sheet-label" style="display:none">Hidden Label</span>
  <div role="dialog" aria-labelledby="hidden-sheet-label">
    <p>Content without visible heading</p>
    <button mat-button aria-label="Close">Done</button>
  </div>
</ng-template>

<!-- Bottom sheet with incorrect heading level (h6 for primary heading) -->
<ng-template #wrongHeadingLevelSheet>
  <h6>Main Sheet Title</h6>
  <p>Using h6 for the main heading is semantically incorrect</p>
  <button mat-button>Close</button>
</ng-template>
